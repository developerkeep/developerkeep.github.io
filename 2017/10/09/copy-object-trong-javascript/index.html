<!DOCTYPE html>
<html lang=vi>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="Copy object trong javascript">
<meta name="keywords" content="Javascript">
<meta property="og:type" content="article">
<meta property="og:title" content="Copy object trong javascript">
<meta property="og:url" content="http://developerkeep.com/2017/10/09/copy-object-trong-javascript/index.html">
<meta property="og:site_name" content="DeveloperKeep">
<meta property="og:description" content="Copy object trong javascript">
<meta property="og:locale" content="vi">
<meta property="og:updated_time" content="2017-10-09T07:54:41.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Copy object trong javascript">
<meta name="twitter:description" content="Copy object trong javascript">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>Copy object trong javascript</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- rss -->
    
    
</head>

<body class="max-width mx-auto px3">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Trang chủ</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Blogs</a></li>
         
          <li><a href="/Search/">Tìm kiếm</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2017/10/09/nhat-ky-di-lam-chi-bang-mot-buc-anh/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2017/10/07/code-nhanh-hon-voi-va-snippets-cua-visual-assist-x-trong-visual-studio/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Bài viết trước</span>
      <span id="i-next" class="info" style="display:none;">Bài viết tiếp theo</span>
      <span id="i-top" class="info" style="display:none;">Về đầu trang</span>
      <span id="i-share" class="info" style="display:none;">Chia sẻ bài viết</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://developerkeep.com/2017/10/09/copy-object-trong-javascript/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://developerkeep.com/2017/10/09/copy-object-trong-javascript/&text=Copy object trong javascript"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://developerkeep.com/2017/10/09/copy-object-trong-javascript/&title=Copy object trong javascript"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://developerkeep.com/2017/10/09/copy-object-trong-javascript/&is_video=false&description=Copy object trong javascript"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Copy object trong javascript&body=Check out this article: http://developerkeep.com/2017/10/09/copy-object-trong-javascript/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://developerkeep.com/2017/10/09/copy-object-trong-javascript/&title=Copy object trong javascript"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://developerkeep.com/2017/10/09/copy-object-trong-javascript/&title=Copy object trong javascript"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://developerkeep.com/2017/10/09/copy-object-trong-javascript/&title=Copy object trong javascript"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://developerkeep.com/2017/10/09/copy-object-trong-javascript/&title=Copy object trong javascript"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://developerkeep.com/2017/10/09/copy-object-trong-javascript/&name=Copy object trong javascript&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Object-don-gian"><span class="toc-number">1.</span> <span class="toc-text">Object đơn giản</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Object-phuc-tap-object-dang-long-nhau"><span class="toc-number">2.</span> <span class="toc-text">Object phức tạp, object dạng lồng nhau</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Deep-copy"><span class="toc-number">3.</span> <span class="toc-text">Deep copy</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Copy object trong javascript
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">DeveloperKeep</span>
      </span>
      
    <div class="postdate">
        <time datetime="2017-10-08T20:47:59.000Z" itemprop="datePublished">2017-10-09</time>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/Javascript/">Javascript</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h3 id="Object-don-gian"><a href="#Object-don-gian" class="headerlink" title="Object đơn giản"></a>Object đơn giản</h3><p>Trong Javascript có rất nhiều cách để copy một đối tượng, ví dụ 1 trong các cách là sử dụng chức năng phân rã object của Javascript:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> srcObj = &#123;</span><br><span class="line">	data: <span class="string">'someData'</span>,</span><br><span class="line">	text: <span class="string">'someText'</span>,</span><br><span class="line">	number: <span class="string">'someNumber'</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> copyObj = &#123;...srcObj&#125;; <span class="comment">// phân rã object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(copyObj));</span><br></pre></td></tr></table></figure>
<p>kết quả </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;data&quot;:&quot;someData&quot;,&quot;text&quot;:&quot;someText&quot;,&quot;number&quot;:&quot;someNumber&quot;&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Object-phuc-tap-object-dang-long-nhau"><a href="#Object-phuc-tap-object-dang-long-nhau" class="headerlink" title="Object phức tạp, object dạng lồng nhau"></a>Object phức tạp, object dạng lồng nhau</h3><p>Ở dạng lồng nhau kiểu:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> srcObj = &#123;</span><br><span class="line">    value: <span class="number">1</span>,</span><br><span class="line">    obj: &#123;</span><br><span class="line">        valueChild: <span class="number">2</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>Với dạng này sử dụng copy bình thường như cách trên thì ta vẫn copy được object đấy, tuy nhiên thứ sao chép được chỉ là những thuộc tính nằm ở lớp đầu tiên của <code>srcObj</code> thôi. Vậy nên nếu thuộc tính lớp đầu tiên này là một object thì nó chỉ copy con trỏ tới object con <code>srcObj.obj</code> đó:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> copyObj = &#123;...srcObj&#125;; <span class="comment">// copy theo kiểu phân rã</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(copyObj)); <span class="comment">// in copy ra</span></span><br><span class="line"></span><br><span class="line">    srcObj.obj.valueChild = <span class="number">12345</span>; <span class="comment">// thay đổi thuộc tính của lớp con của obj src</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(copyObj)); <span class="comment">// in copy ra lần 2</span></span><br></pre></td></tr></table></figure>
<p>Kết quả là:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;value&quot;:1,&quot;obj&quot;:&#123;&quot;valueChild&quot;:2&#125;&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;value&quot;:1,&quot;obj&quot;:&#123;&quot;valueChild&quot;:12345&#125;&#125;</span><br></pre></td></tr></table></figure>
<p>Thấy chưa, object copy <code>copyObj</code> bị thay đổi giá trị khi thay đổi giá trị ở object nguồn <code>srcObj</code>.<br>Vì vậy chúng ta khi code javascript cần chú ý về copy object. Nếu object có nhiều tầng mà cứ copy kiểu như vậy thì có thể một ngày nào đó bạn sẽ không biết tại sao dữ liệu tự nhiên bị thay đổi một cách thần kỳ!</p>
<h3 id="Deep-copy"><a href="#Deep-copy" class="headerlink" title="Deep copy"></a>Deep copy</h3><p>Với những ứng dụng thực tế thì các object lồng nhau là chuyện bình thường, đôi lúc chúng ta cần phải copy object như thế thì phải làm thế nào?</p>
<ul>
<li><p>Tự viết hàm copy object: chúng ta có thể viết hàm duyệt toàn bộ object và copy nội dung của nó từ gốc đến ngọn</p>
</li>
<li><p>Sử dụng thư viện chuyên biệt: có một số thư viện làm điều này cho chúng ta và cung cấp hàm để sử dụng một cách đơn giản: <code>lodash</code> (<code>underscore</code>)</p>
</li>
<li><p>Sử dụng thư viện <code>Imutable</code>: cũng là thư viện nhưng mình tách thể loại này ra vì nó là thư viện đặc biệt, nhất là với những ai làm ứng dụng có sử dụng redux. Imutable tạo ra object mà ta không thể thay đổi dữ liệu của nó được, mỗi lần thay đổi sẽ tạo ra một object copy mới (thuật toán copy của nó tối ưu, không phải đi copy toàn bộ từ đầu đến cuối).</p>
</li>
</ul>
<p>Chi tiết các thư viện nhắc đến trên đã có đầy đủ tài liệu mạng, trong phạm vi bài này mục đích mình chỉ ra việc cần thận trọng trong việc copy các object lồng nhau thôi. </p>
<p>Bài viết đến đây là hết, hi vọng giúp ích một phần cho bạn trong quá trình học Jav*script</p>

  </div>
</article>

    <div class="fb-comments" data-href="http://developerkeep.com" data-width="" data-numposts="5"></div>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Trang chủ</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Blogs</a></li>
         
          <li><a href="/Search/">Tìm kiếm</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Object-don-gian"><span class="toc-number">1.</span> <span class="toc-text">Object đơn giản</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Object-phuc-tap-object-dang-long-nhau"><span class="toc-number">2.</span> <span class="toc-text">Object phức tạp, object dạng lồng nhau</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Deep-copy"><span class="toc-number">3.</span> <span class="toc-text">Deep copy</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://developerkeep.com/2017/10/09/copy-object-trong-javascript/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://developerkeep.com/2017/10/09/copy-object-trong-javascript/&text=Copy object trong javascript"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://developerkeep.com/2017/10/09/copy-object-trong-javascript/&title=Copy object trong javascript"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://developerkeep.com/2017/10/09/copy-object-trong-javascript/&is_video=false&description=Copy object trong javascript"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Copy object trong javascript&body=Check out this article: http://developerkeep.com/2017/10/09/copy-object-trong-javascript/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://developerkeep.com/2017/10/09/copy-object-trong-javascript/&title=Copy object trong javascript"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://developerkeep.com/2017/10/09/copy-object-trong-javascript/&title=Copy object trong javascript"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://developerkeep.com/2017/10/09/copy-object-trong-javascript/&title=Copy object trong javascript"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://developerkeep.com/2017/10/09/copy-object-trong-javascript/&title=Copy object trong javascript"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://developerkeep.com/2017/10/09/copy-object-trong-javascript/&name=Copy object trong javascript&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Chia sẻ</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Lên đầu trang</a>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2019 DeveloperKeep
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Trang chủ</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Blogs</a></li>
         
          <li><a href="/Search/">Tìm kiếm</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/fontawesome-all.min.css">
<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">

<!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-88004252-1', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Disqus Comments -->


<!-- facebook comments -->

    <div id="fb-root"></div>
    <script async defer crossorigin="anonymous" src="https://connect.facebook.net/vi_VN/sdk.js#xfbml=1&version=v4.0&appId=717850765345358"></script>

